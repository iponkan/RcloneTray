# Rclone 托盘管理工具 (便携版)

这是一个轻量级、完全便携的 Windows 托盘工具，用于管理 [Rclone](https://rclone.org/) 挂载。
基于 PowerShell 和 Batch 编写，无需安装，解压即用。

## 📂 目录结构 

```text
RcloneTray/
│
├── RcloneTray.bat        <-- 启动脚本 (初始化双击这个即可)
│
└── core/                 <-- [核心文件夹] 
    ├── rclone.exe        <-- 【注意】必须把下载的 rclone.exe 放进这里！
    ├── tray.ps1
    ├── start.vbs
    └── ... (配置文件会自动生成在这里)
```

## ✨ 主要功能

- **系统托盘图标**：程序运行时最小化到右下角托盘（原生 Rclone 图标），界面整洁。
- **网页控制台**：集成 Rclone Web Dashboard，双击图标即可查看传输速度和日志。
- **智能配置向导**：
  - **自动列出** 已配置的网盘，无需手动输入名称。
  - **自动检测** 系统空闲盘符（如 Z:, X:），防止冲突。
  - **自动分配** 端口号（5572, 5573...），支持多开。
- **静默运行**：彻底隐藏 CMD 黑框，后台默默工作。
- **极致便携**：所有配置都在当前文件夹内，可放入 U 盘随身携带，换电脑也能用。
- **智能防多开**：当程序已在运行时，再次点击快捷方式会直接打开 Web 控制台，而不是重复启动。

## 🚀 快速开始

### 1. 准备工作

- **安装 WinFsp**: 在 Windows 上使用 `rclone mount` 功能需要先安装 [WinFsp](https://github.com/winfsp/winfsp)，请先下载并安装它。
- 适用于 Windows 10 / 11 系统。
- 请从 [Rclone 官网](https://rclone.org/downloads/) 下载 Windows 版本 (zip)。
- 解压后，**将 `rclone.exe` 移动到本项目的 `core/` 文件夹内。**

### 2. 使用步骤

1. 在根目录下双击运行 **`RcloneTray.bat`**。
2. **输入 [1]**：进入 Rclone 官方配置向导，登录你的网盘账号 (如 OneDrive, Google Drive, 阿里云盘等)。
3. **输入 [2]**：进入挂载配置。
   - 脚本会自动列出你的网盘和可用盘符。
   - 按提示输入网盘名（如 `onedrive`）和盘符（如 `Z`）。
4. **输入 [3]**：生成 **桌面快捷方式**。
5. **输入 [4]**：设置 **开机自启** (适合长期挂载)。

**完成！** 以后只需双击桌面的图标即可启动挂载。

## 🕹️ 操作说明

程序启动后，屏幕右下角任务栏会出现一个 **蓝色云朵图标**。

- **左键双击**：打开网页控制台 (Dashboard)。
- **右键单击**：退出程序 (自动卸载磁盘并清理进程)。

## ❓ 常见问题

- **Q: 为什么双击没反应？**
  - A: 请检查 `core` 文件夹里是否有 `rclone.exe`。
- **Q: 如何修改配置？**
  - A: 再次运行 `RcloneTray.bat`，选择对应选项即可修改。
- **Q: 杀毒软件报错？**
  - A: 脚本使用了 PowerShell 调用系统 API (创建快捷方式、挂载磁盘)，可能会被误报，请添加信任。

## 📄 开源协议

MIT License